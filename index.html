<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>OpenMyDevice - TOMBOLA</title>
  
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
</head>
<body>

  <div class="container text-center">

    <div class="row">
        <div class="alert alert-success" role="alert">
            <h2>Bienvenu dans le simulateur du <b>TOMBOLA</b> créer Par l'équipe <b>OpenMyDevice</b> </h2>
            <h4>🎉 Merci pour votre participation et votre confiance 🎉</h4>
            <h6> Que le hasard soit avec vous 😆 </h6>
        </div>
        <div class="alert alert-light" role="alert">
            <label class="form-label"><b>Chers participants,</b></label>
            <label class="form-label"> </label>
            <label class="form-label">
                <b>Toute l’équipe OpenMyDevice tient à vous adresser un immense merci pour votre participation
                 à notre tombola et, surtout, pour la confiance que vous accordez à notre projet.</b>
                Votre soutien nous encourage à aller toujours plus loin dans notre mission : proposer une <b>solution 
                de double authentification innovante,</b> sécurisée et transparente.
                Dans cet esprit, nous avons choisi de rendre public le code du tirage au sort, afin que chacun 
                puisse vérifier le bon déroulement du processus. Cette ouverture reflète <b>nos valeurs de transparence,
                 d’éthique et de respect de la communauté.</b>
                Encore merci d’avoir rejoint cette <b>aventure sur Ulule.</b> Grâce à vous, <b>OpenMyDevice</b> 
                continue de grandir et de bâtir une sécurité numérique accessible à tous. 
            </label>
        </div>
        
        
        <div class="card">
            <div class="card-header">
                <h3>🧠Pour plus de transparence <b>OpenMyDevice</b> a choisi :</h3>
            </div>
            <div class="card-body">
                <h5 class="card-title">d'ouvrir le CODE de la <b>TOMBOLA</b> ✅</h5>
                <p class="card-text">🧑‍💻Chez <b>OpenMyDevice</b>, la confiance est au cœur de tout ce que nous faisons.
                     C’est pourquoi l’équipe a décidé d’ouvrir le code source du tirage au sort de la <b>TOMBOLA</b>,
                      afin que chacun puisse vérifier par lui-même le fonctionnement du système et constater
                       l’équité totale du processus
                </p>
                <p class="card-text">🌐 Cette démarche de transparence ouverte est encore rare,
                     mais elle s’inscrit dans une tendance croissante des projets technologiques
                      responsables : permettre à la communauté de contrôler, comprendre et valider
                       les mécanismes qui assurent leur fiabilité. En rendant le code public, 
                       <b>OpenMyDevice</b> renforce la confiance des participants et prouve son engagement 
                       pour une innovation éthique et transparente.
                </p>
                <p class="card-text">🔐 <b>OpenMyDevice,</b> c’est aussi une application de double authentification
                     simple, sécurisée et respectueuse de la vie privée — disponible exclusivement sur la plateforme
                      de financement participatif Ulule.
                </p>
                <p class="card-text" id="nv">
                    💡 C’est le moment d’en profiter !
                    Cette offre est limitée dans le temps, alors rejoignez dès maintenant l’aventure <b>OpenMyDevice,</b> 
                    soutenez un projet engagé et bénéficiez d’un accès exclusif à une solution d’authentification 
                    pensée pour la sécurité de tous.
                </p>

                <a href="https://www.openmydeviceapp.fr" class="btn btn-success">⚡ Pour plus d'info sur le projet ⚡</a>
            </div>
        </div>
        
    <div class="row">
        <p> </p>
        <div class="alert alert-warning"  role="alert">
            <h4><b>🎰 Veuillez renseigner les informations des contributeurs</b></h4>
            <h6><b>✔️ Nom de participant</b></h6>
            <h6><b>✔️ Nombre de ticket</b></h6>
        </div>   
    </div>
      
    </div>
        <form>
            <div class="row alert alert-success" role="alert">
                <div class="col">
                    <div class="mb-3">
                        <b><p style="text-align: left;">Contributeur :</p></b>
                        <input type="text" class="form-control form-control-lg" id="contributeur" placeholder="Nom de la personne">
                        <div id="errorNom" style="color: red; text-align: left;"></div>
                    </div>
                </div>

                <div class="col">
                    <div class="mb-3">
                        <b><p style="text-align: left;">Nombre de ticket :</p></b>
                        <input type="number" max="20" min="1" value="1" class="form-control form-control-lg" id="ticket" placeholder="Nombre de ticket">
                        <div id="errorTicket" style="color: red; text-align: left;"></div>
                    </div>
                </div>

                <div class="row">
                    <div class="col">
                        <div id="error" style="color: red; "></div>
                        <button type="button" onclick="ajouterContributeur()" class="btn btn-primary form-control-lg mb-3">Ajouter à la liste des participants</button>
                    </div>
                </div>
                
                <div class="row">
                    <h4><b>🎰Liste des Contributeurs 🏷️ </b></h4>
                    <div id="Contributeurs" > </div>
                </div>

                <div class="row">
                    <p> </p>
                    <div id="melange" style="color: red; "></div>
                    <button type="button" id="btnM" disabled onclick="melangerListe()" class="btn btn-primary form-control-lg mb-3">Mélanger la liste des contributeurs</button>
                </div>

            </div>

        </form>
        
        <div class="row">
            <p> </p>
            <div class="col">
                <div class="alert alert-light" role="alert">
                    <h4><b>🎉 Annonce du tirage au sort – Tombola OpenMyDevice 🎉</b></h4>
                    <label class="form-label"><b>Chers participants,</b></label>
                
                    <label class="form-label">
                    Les envois des lots se feront dans les prochains jours. Nous vous contacterons personnellement
                     pour confirmer vos informations et organiser la livraison. 🚚📦
                    Nous tenons à remercier sincèrement chacun d’entre vous pour votre participation et votre soutien
                     à ce projet. Votre enthousiasme et votre engagement ont donné vie à cette belle aventure ! ❤️
                    </label>
                    <button type="button" disabled id="tombola" onclick="tirerLeGagnant()" class="btn btn-success form-control-lg mb-3">🚀 Lançons le tirage OpenMyDevice 🚀</button>
                    <div id="errorTombola" style="color: red; "></div>
                    <div id="gagnants">  </div>
                    <div> </div>
                    <h3 id="felicitations" style="color: green; ">  </h3>

                </div>
                <p> </p>
                <div class="alert alert-warning" role="alert">
                    <p id="hid1" hidden>
                    <b>L’équipe OpenMyDevice est heureuse de vous annoncer</b> que le tirage au sort de notre tombola a été 
                    effectué ! <b>🎊 Un grand félicitations à tous les gagnants </b> ! Le tirage s’est déroulé en trois
                     fois, dans <b>un esprit de transparence et de convivialité.</b>
                    </p>

                    <p id="hid2" hidden>
                    Mais ce n’est pas une fin, loin de là ! <b>Peut-être aurons-nous le plaisir de vous retrouver lors
                     d’une prochaine tombola ou d’un nouveau projet OpenMyDevice.</b> Restons en contact : notre lien ne 
                     se coupe pas à la fin d’un projet. Nous formons désormais une véritable <b>communauté,</b> unie par les 
                     mêmes valeurs et les mêmes objectifs. <b>Partager, créer et avancer ensemble. 🤝</b>
                    </p>

                    <p id="hid3" hidden>
                        Encore une fois, merci à toutes et à tous pour votre confiance et votre participation.
                        À très bientôt pour de nouvelles aventures avec <b>OpenMyDevice ! 🚀</b>
                    </p>

                    <a type="button" href="#nv" hidden id="nvTombola" onclick="raz()" class="btn btn-primary form-control-lg mb-3">🚀 Lançons un nouvelle Tombola 🚀</a>


                </div>
                
            </div>
        </div>
    </div>
</body>
</html>

<script>
  var contributeurs = [];
  var copieContributeurs = [];
  var contributeur ="";
  var cpt =1;
  var ticket = 1;
  var listGagnants = [];


  function ajouterContributeur() {
    
    if(verificationInputNom() && verificationInputTicket())
    {
        ticket = document.getElementById("ticket").value;
        if(ticket > 1)
        {
            for (let i = 0; i < ticket; i++)
            {
                ajouterListe();   
            }
        }
        else {
            ajouterListe();
        }
        viderError();
        document.getElementById("contributeur").value = "";
    }
    else {
        document.getElementById("error").innerHTML = "Le formulaire est incorrecte !";
    }

    if(contributeurs.length == 3)
    {
        console.log(contributeurs.length);
        document.getElementById("btnM").removeAttribute("disabled");
        document.getElementById("tombola").removeAttribute("disabled");


    }
    
}

function ajouterListe() {
    contributeur = document.getElementById("contributeur").value;
    contributeurs.push(contributeur);
    document.getElementById("Contributeurs").innerHTML+="<span style='font-size: x-large;' class='badge text-bg-secondary'>"+ contributeur +"</span> <span>  </span> ";
}

function verificationInputNom() {
    var nom = document.getElementById("contributeur").value;
    var isOk = false;
    if(nom != ""){
        isOk = true;        
    }
    else {
        document.getElementById("errorNom").innerHTML = "Veuillez saisir un nom SVP";
        isOk = false;
    }
    return isOk;
}


function verificationInputTicket () {
    var ticket = document.getElementById("ticket").value;
    var isOk = false;
    if((ticket >= 1) && (ticket <= 20)){
        isOk = true;
    }
    else {
        document.getElementById("errorTicket").innerHTML = "Veuillez saisir un nombre entre 1 et 20";
        isOk = false;
    }
    return isOk;
}

function viderError() {
    document.getElementById("errorNom").innerHTML = "";
    document.getElementById("errorTicket").innerHTML = "";
    document.getElementById("error").innerHTML = "";

}

function remplirListeContributeurs() {
    contributeurs = copieContributeurs;
}

function melangerListe() {
    
    let indexAleatoire = 0;
    let element;
    var listeOriginale = contributeurs;
    let div = "";
    copieContributeurs = [];
    if(contributeurs.length > 1)
    {
        while (listeOriginale.length > 0) {
            indexAleatoire = Math.floor(Math.random() * listeOriginale.length);
            element = listeOriginale[indexAleatoire];
            copieContributeurs.push(element);
            listeOriginale.splice(indexAleatoire, 1);
            document.getElementById("Contributeurs").innerHTML = "";
            for (let index = 0; index < copieContributeurs.length; index++) {
                document.getElementById("Contributeurs").innerHTML += "<span style='font-size: x-large;' class='badge text-bg-secondary'>"+ copieContributeurs[index] +"</span> <span>  </span>";
            }
            remplirListeContributeurs();
            document.getElementById("melange").innerHTML ="";
        }
    }
    else {
        document.getElementById("melange").innerHTML = "Veuillez saisir plusieurs contributeurs";
    }
}


function tirerLeGagnant () {
    var indexAleatoire = 0;
    let element;
    var g = [];
    var listeOriginale = contributeurs;
    if(cpt != 4)
    {
        indexAleatoire = Math.floor(Math.random() * listeOriginale.length);
        element = listeOriginale[indexAleatoire];
        g.push(element);
        listeOriginale.splice(indexAleatoire, 1);
        document.getElementById("gagnants").innerHTML += "<h2><span style='font-size: x-large;' class='badge text-bg-success'>"+  cpt +" "+ element +"</span></h2> <span>  </span>";
        cpt++;
    }

    if(cpt == 4) {
        document.getElementById("felicitations").innerHTML = "Le Tirage au sort est terminé ! Félicitations aux gagnants.";
        document.getElementById("tombola").setAttribute("disabled", true)
        document.getElementById("hid1").removeAttribute("hidden");
        document.getElementById("hid2").removeAttribute("hidden");
        document.getElementById("hid3").removeAttribute("hidden");
        document.getElementById("nvTombola").removeAttribute("hidden");
    }
    
}

function raz() {
    contributeurs = [];
    copieContributeurs = [];
    contributeur ="";
    cpt =1;

    document.getElementById("tombola").setAttribute("disabled", true);
    document.getElementById("btnM").setAttribute("disabled", true);
    document.getElementById("gagnants").innerHTML="";
    document.getElementById("Contributeurs").innerHTML = "";
    document.getElementById("felicitations").innerHTML = "";


}


</script>