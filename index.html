<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>OpenMyDevice - TOMBOLA</title>
  
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
</head>
<body>

  <div class="container text-center">

    <div class="row">
        <div class="alert alert-success" role="alert">
            <h2>Bienvenu dans le simulateur du <b>TOMBOLA</b> crÃ©er Par l'Ã©quipe <b>OpenMyDevice</b> </h2>
            <h4>ğŸ‰ Merci pour votre participation et votre confiance ğŸ‰</h4>
            <h6> Que le hasard soit avec vous ğŸ˜† </h6>
        </div>
        <div class="alert alert-light" role="alert">
            <label class="form-label"><b>Chers participants,</b></label>
            <label class="form-label"> </label>
            <label class="form-label">
                <b>Toute lâ€™Ã©quipe OpenMyDevice tient Ã  vous adresser un immense merci pour votre participation
                 Ã  notre tombola et, surtout, pour la confiance que vous accordez Ã  notre projet.</b>
                Votre soutien nous encourage Ã  aller toujours plus loin dans notre mission : proposer une <b>solution 
                de double authentification innovante,</b> sÃ©curisÃ©e et transparente.
                Dans cet esprit, nous avons choisi de rendre public le code du tirage au sort, afin que chacun 
                puisse vÃ©rifier le bon dÃ©roulement du processus. Cette ouverture reflÃ¨te <b>nos valeurs de transparence,
                 dâ€™Ã©thique et de respect de la communautÃ©.</b>
                Encore merci dâ€™avoir rejoint cette <b>aventure sur Ulule.</b> GrÃ¢ce Ã  vous, <b>OpenMyDevice</b> 
                continue de grandir et de bÃ¢tir une sÃ©curitÃ© numÃ©rique accessible Ã  tous. 
            </label>
        </div>
        
        
        <div class="card">
            <div class="card-header">
                <h3>ğŸ§ Pour plus de transparence <b>OpenMyDevice</b> a choisi :</h3>
            </div>
            <div class="card-body">
                <h5 class="card-title">d'ouvrir le CODE de la <b>TOMBOLA</b> âœ…</h5>
                <p class="card-text">ğŸ§‘â€ğŸ’»Chez <b>OpenMyDevice</b>, la confiance est au cÅ“ur de tout ce que nous faisons.
                     Câ€™est pourquoi lâ€™Ã©quipe a dÃ©cidÃ© dâ€™ouvrir le code source du tirage au sort de la <b>TOMBOLA</b>,
                      afin que chacun puisse vÃ©rifier par lui-mÃªme le fonctionnement du systÃ¨me et constater
                       lâ€™Ã©quitÃ© totale du processus
                </p>
                <p class="card-text">ğŸŒ Cette dÃ©marche de transparence ouverte est encore rare,
                     mais elle sâ€™inscrit dans une tendance croissante des projets technologiques
                      responsables : permettre Ã  la communautÃ© de contrÃ´ler, comprendre et valider
                       les mÃ©canismes qui assurent leur fiabilitÃ©. En rendant le code public, 
                       <b>OpenMyDevice</b> renforce la confiance des participants et prouve son engagement 
                       pour une innovation Ã©thique et transparente.
                </p>
                <p class="card-text">ğŸ” <b>OpenMyDevice,</b> câ€™est aussi une application de double authentification
                     simple, sÃ©curisÃ©e et respectueuse de la vie privÃ©e â€” disponible exclusivement sur la plateforme
                      de financement participatif Ulule.
                </p>
                <p class="card-text" id="nv">
                    ğŸ’¡ Câ€™est le moment dâ€™en profiter !
                    Cette offre est limitÃ©e dans le temps, alors rejoignez dÃ¨s maintenant lâ€™aventure <b>OpenMyDevice,</b> 
                    soutenez un projet engagÃ© et bÃ©nÃ©ficiez dâ€™un accÃ¨s exclusif Ã  une solution dâ€™authentification 
                    pensÃ©e pour la sÃ©curitÃ© de tous.
                </p>

                <a href="https://www.openmydeviceapp.fr" class="btn btn-success">âš¡ Pour plus d'info sur le projet âš¡</a>
            </div>
        </div>
        
    <div class="row">
        <p> </p>
        <div class="alert alert-warning"  role="alert">
            <h4><b>ğŸ° Veuillez renseigner les informations des contributeurs</b></h4>
            <h6><b>âœ”ï¸ Nom de participant</b></h6>
            <h6><b>âœ”ï¸ Nombre de ticket</b></h6>
        </div>   
    </div>
      
    </div>
        <form>
            <div class="row alert alert-success" role="alert">
                <div class="col">
                    <div class="mb-3">
                        <b><p style="text-align: left;">Contributeur :</p></b>
                        <input type="text" class="form-control form-control-lg" id="contributeur" placeholder="Nom de la personne">
                        <div id="errorNom" style="color: red; text-align: left;"></div>
                    </div>
                </div>

                <div class="col">
                    <div class="mb-3">
                        <b><p style="text-align: left;">Nombre de ticket :</p></b>
                        <input type="number" max="20" min="1" value="1" class="form-control form-control-lg" id="ticket" placeholder="Nombre de ticket">
                        <div id="errorTicket" style="color: red; text-align: left;"></div>
                    </div>
                </div>

                <div class="row">
                    <div class="col">
                        <div id="error" style="color: red; "></div>
                        <button type="button" onclick="ajouterContributeur()" class="btn btn-primary form-control-lg mb-3">Ajouter Ã  la liste des participants</button>
                    </div>
                </div>
                
                <div class="row">
                    <h4><b>ğŸ°Liste des Contributeurs ğŸ·ï¸ </b></h4>
                    <div id="Contributeurs" > </div>
                </div>

                <div class="row">
                    <p> </p>
                    <div id="melange" style="color: red; "></div>
                    <button type="button" id="btnM" disabled onclick="melangerListe()" class="btn btn-primary form-control-lg mb-3">MÃ©langer la liste des contributeurs</button>
                </div>

            </div>

        </form>
        
        <div class="row">
            <p> </p>
            <div class="col">
                <div class="alert alert-light" role="alert">
                    <h4><b>ğŸ‰ Annonce du tirage au sort â€“ Tombola OpenMyDevice ğŸ‰</b></h4>
                    <label class="form-label"><b>Chers participants,</b></label>
                
                    <label class="form-label">
                    Les envois des lots se feront dans les prochains jours. Nous vous contacterons personnellement
                     pour confirmer vos informations et organiser la livraison. ğŸššğŸ“¦
                    Nous tenons Ã  remercier sincÃ¨rement chacun dâ€™entre vous pour votre participation et votre soutien
                     Ã  ce projet. Votre enthousiasme et votre engagement ont donnÃ© vie Ã  cette belle aventure ! â¤ï¸
                    </label>
                    <button type="button" disabled id="tombola" onclick="tirerLeGagnant()" class="btn btn-success form-control-lg mb-3">ğŸš€ LanÃ§ons le tirage OpenMyDevice ğŸš€</button>
                    <div id="errorTombola" style="color: red; "></div>
                    <div id="gagnants">  </div>
                    <div> </div>
                    <h3 id="felicitations" style="color: green; ">  </h3>

                </div>
                <p> </p>
                <div class="alert alert-warning" role="alert">
                    <p id="hid1" hidden>
                    <b>Lâ€™Ã©quipe OpenMyDevice est heureuse de vous annoncer</b> que le tirage au sort de notre tombola a Ã©tÃ© 
                    effectuÃ© ! <b>ğŸŠ Un grand fÃ©licitations Ã  tous les gagnants </b> ! Le tirage sâ€™est dÃ©roulÃ© en trois
                     fois, dans <b>un esprit de transparence et de convivialitÃ©.</b>
                    </p>

                    <p id="hid2" hidden>
                    Mais ce nâ€™est pas une fin, loin de lÃ  ! <b>Peut-Ãªtre aurons-nous le plaisir de vous retrouver lors
                     dâ€™une prochaine tombola ou dâ€™un nouveau projet OpenMyDevice.</b> Restons en contact : notre lien ne 
                     se coupe pas Ã  la fin dâ€™un projet. Nous formons dÃ©sormais une vÃ©ritable <b>communautÃ©,</b> unie par les 
                     mÃªmes valeurs et les mÃªmes objectifs. <b>Partager, crÃ©er et avancer ensemble. ğŸ¤</b>
                    </p>

                    <p id="hid3" hidden>
                        Encore une fois, merci Ã  toutes et Ã  tous pour votre confiance et votre participation.
                        Ã€ trÃ¨s bientÃ´t pour de nouvelles aventures avec <b>OpenMyDevice ! ğŸš€</b>
                    </p>

                    <a type="button" href="#nv" hidden id="nvTombola" onclick="raz()" class="btn btn-primary form-control-lg mb-3">ğŸš€ LanÃ§ons un nouvelle Tombola ğŸš€</a>


                </div>
                
            </div>
        </div>
    </div>
</body>
</html>

<script>
  var contributeurs = [];
  var copieContributeurs = [];
  var contributeur ="";
  var cpt =1;
  var ticket = 1;
  var listGagnants = [];


  function ajouterContributeur() {
    
    if(verificationInputNom() && verificationInputTicket())
    {
        ticket = document.getElementById("ticket").value;
        if(ticket > 1)
        {
            for (let i = 0; i < ticket; i++)
            {
                ajouterListe();   
            }
        }
        else {
            ajouterListe();
        }
        viderError();
        document.getElementById("contributeur").value = "";
    }
    else {
        document.getElementById("error").innerHTML = "Le formulaire est incorrecte !";
    }

    if(contributeurs.length == 3)
    {
        console.log(contributeurs.length);
        document.getElementById("btnM").removeAttribute("disabled");
        document.getElementById("tombola").removeAttribute("disabled");


    }
    
}

function ajouterListe() {
    contributeur = document.getElementById("contributeur").value;
    contributeurs.push(contributeur);
    document.getElementById("Contributeurs").innerHTML+="<span style='font-size: x-large;' class='badge text-bg-secondary'>"+ contributeur +"</span> <span>  </span> ";
}

function verificationInputNom() {
    var nom = document.getElementById("contributeur").value;
    var isOk = false;
    if(nom != ""){
        isOk = true;        
    }
    else {
        document.getElementById("errorNom").innerHTML = "Veuillez saisir un nom SVP";
        isOk = false;
    }
    return isOk;
}


function verificationInputTicket () {
    var ticket = document.getElementById("ticket").value;
    var isOk = false;
    if((ticket >= 1) && (ticket <= 20)){
        isOk = true;
    }
    else {
        document.getElementById("errorTicket").innerHTML = "Veuillez saisir un nombre entre 1 et 20";
        isOk = false;
    }
    return isOk;
}

function viderError() {
    document.getElementById("errorNom").innerHTML = "";
    document.getElementById("errorTicket").innerHTML = "";
    document.getElementById("error").innerHTML = "";

}

function remplirListeContributeurs() {
    contributeurs = copieContributeurs;
}

function melangerListe() {
    
    let indexAleatoire = 0;
    let element;
    var listeOriginale = contributeurs;
    let div = "";
    copieContributeurs = [];
    if(contributeurs.length > 1)
    {
        while (listeOriginale.length > 0) {
            indexAleatoire = Math.floor(Math.random() * listeOriginale.length);
            element = listeOriginale[indexAleatoire];
            copieContributeurs.push(element);
            listeOriginale.splice(indexAleatoire, 1);
            document.getElementById("Contributeurs").innerHTML = "";
            for (let index = 0; index < copieContributeurs.length; index++) {
                document.getElementById("Contributeurs").innerHTML += "<span style='font-size: x-large;' class='badge text-bg-secondary'>"+ copieContributeurs[index] +"</span> <span>  </span>";
            }
            remplirListeContributeurs();
            document.getElementById("melange").innerHTML ="";
        }
    }
    else {
        document.getElementById("melange").innerHTML = "Veuillez saisir plusieurs contributeurs";
    }
}


function tirerLeGagnant () {
    var indexAleatoire = 0;
    let element;
    var g = [];
    var listeOriginale = contributeurs;
    if(cpt != 4)
    {
        indexAleatoire = Math.floor(Math.random() * listeOriginale.length);
        element = listeOriginale[indexAleatoire];
        g.push(element);
        listeOriginale.splice(indexAleatoire, 1);
        document.getElementById("gagnants").innerHTML += "<h2><span style='font-size: x-large;' class='badge text-bg-success'>"+  cpt +" "+ element +"</span></h2> <span>  </span>";
        cpt++;
    }

    if(cpt == 4) {
        document.getElementById("felicitations").innerHTML = "Le Tirage au sort est terminÃ© ! FÃ©licitations aux gagnants.";
        document.getElementById("tombola").setAttribute("disabled", true)
        document.getElementById("hid1").removeAttribute("hidden");
        document.getElementById("hid2").removeAttribute("hidden");
        document.getElementById("hid3").removeAttribute("hidden");
        document.getElementById("nvTombola").removeAttribute("hidden");
    }
    
}

function raz() {
    contributeurs = [];
    copieContributeurs = [];
    contributeur ="";
    cpt =1;

    document.getElementById("tombola").setAttribute("disabled", true);
    document.getElementById("btnM").setAttribute("disabled", true);
    document.getElementById("gagnants").innerHTML="";
    document.getElementById("Contributeurs").innerHTML = "";
    document.getElementById("felicitations").innerHTML = "";


}


</script>